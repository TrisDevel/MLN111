<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiểm tra kiến thức - Tư tưởng Hồ Chí Minh</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="pic/favicon.png">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-custom fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="pic/hochiminh.png" alt="Hồ Chí Minh" width="40" height="40" class="me-2">
                Tư tưởng Hồ Chí Minh
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">
                            <i class="bi bi-house-door me-1"></i>Trang chủ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="home.html">
                            <i class="bi bi-question-circle me-1"></i>Kiểm tra
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-5 mt-4">
        <!-- Header Section -->
        <section class="py-5 bg-classical text-white">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <h1 class="display-4 mb-3" data-aos="fade-up">
                            <i class="bi bi-trophy me-3"></i>
                            Kiểm tra kiến thức
                        </h1>
                        <p class="lead mb-4" data-aos="fade-up" data-aos-delay="200">
                            Thử thách bản thân với những câu hỏi về Tư tưởng Hồ Chí Minh
                        </p>
                        <div class="quiz-stats d-flex justify-content-center gap-4" data-aos="fade-up" data-aos-delay="400">
                            <div class="stat-item">
                                <div class="h4 mb-0" id="totalQuestions">10</div>
                                <small>Câu hỏi</small>
                            </div>
                            <div class="stat-item">
                                <div class="h4 mb-0" id="currentScore">0</div>
                                <small>Điểm số</small>
                            </div>
                            <div class="stat-item">
                                <div class="h4 mb-0" id="timeSpent">00:00</div>
                                <small>Thời gian</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section class="py-5">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <!-- Quiz Card -->
                        <div class="card shadow-lg" data-aos="fade-up">
                            <div class="card-header bg-classical text-white">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h4 class="mb-0">
                                        <i class="bi bi-question-circle me-2"></i>
                                        Câu hỏi <span id="questionNumber">1</span>/10
                                    </h4>
                                    <div class="progress" style="width: 200px; height: 8px;">
                                        <div class="progress-bar" id="progressBar" style="width: 10%"></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card-body p-4">
                                <!-- Question -->
                                <div id="questionContainer">
                                    <h5 class="question-text mb-4" id="questionText">
                                        Đang tải câu hỏi...
                                    </h5>
                                    
                                    <!-- Options -->
                                    <div class="options-container" id="optionsContainer">
                                        <!-- Options will be populated by JavaScript -->
                                    </div>
                                </div>

                                <!-- Quiz Controls -->
                                <div class="quiz-controls mt-4 d-flex justify-content-between">
                                    <button class="btn btn-outline-secondary" id="prevBtn" disabled>
                                        <i class="bi bi-arrow-left me-2"></i>Câu trước
                                    </button>
                                    
                                    <div class="middle-controls">
                                        <button class="btn btn-warning me-2" id="skipBtn">
                                            <i class="bi bi-skip-forward me-1"></i>Bỏ qua
                                        </button>
                                        <button class="btn btn-info" id="hintBtn">
                                            <i class="bi bi-lightbulb me-1"></i>Gợi ý
                                        </button>
                                    </div>
                                    
                                    <button class="btn btn-classical" id="nextBtn" disabled>
                                        Câu tiếp <i class="bi bi-arrow-right ms-2"></i>
                                    </button>
                                </div>

                                <!-- Hint Container -->
                                <div class="alert alert-info mt-3 d-none" id="hintContainer">
                                    <i class="bi bi-lightbulb me-2"></i>
                                    <span id="hintText"></span>
                                </div>

                                <!-- Explanation Container -->
                                <div class="alert alert-success mt-3 d-none" id="explanationContainer">
                                    <h6><i class="bi bi-check-circle me-2"></i>Giải thích:</h6>
                                    <p class="mb-0" id="explanationText"></p>
                                </div>
                            </div>
                        </div>

                        <!-- Quiz Actions -->
                        <div class="text-center mt-4">
                            <button class="btn btn-success btn-lg me-3" id="submitBtn" style="display: none;">
                                <i class="bi bi-check-lg me-2"></i>Nộp bài
                            </button>
                            <button class="btn btn-secondary" id="restartBtn" style="display: none;">
                                <i class="bi bi-arrow-clockwise me-2"></i>Làm lại
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="py-5 d-none" id="resultsSection">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card shadow-lg border-success">
                            <div class="card-header bg-success text-white text-center">
                                <h3 class="mb-0">
                                    <i class="bi bi-trophy me-2"></i>
                                    Kết quả bài kiểm tra
                                </h3>
                            </div>
                            <div class="card-body p-4">
                                <!-- Score Display -->
                                <div class="text-center mb-4">
                                    <div class="display-1 text-success mb-2" id="finalScore">0</div>
                                    <p class="lead">trên 10 điểm</p>
                                    <div class="h5" id="finalMessage">Xuất sắc!</div>
                                </div>

                                <!-- Detailed Results -->
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <div class="bg-light p-3 rounded">
                                            <div class="h4 text-success" id="correctAnswers">0</div>
                                            <small>Trả lời đúng</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="bg-light p-3 rounded">
                                            <div class="h4 text-danger" id="incorrectAnswers">0</div>
                                            <small>Trả lời sai</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="bg-light p-3 rounded">
                                            <div class="h4 text-warning" id="skippedAnswers">0</div>
                                            <small>Bỏ qua</small>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="text-center mt-4">
                                    <button class="btn btn-classical btn-lg me-3" onclick="location.reload()">
                                        <i class="bi bi-arrow-clockwise me-2"></i>Làm lại
                                    </button>
                                    <a href="index.html" class="btn btn-outline-secondary btn-lg">
                                        <i class="bi bi-house-door me-2"></i>Về trang chủ
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h6>Tư tưởng Hồ Chí Minh</h6>
                    <p class="small mb-0">
                        Học tập và áp dụng tư tưởng của Chủ tịch Hồ Chí Minh vào đời sống
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <small>&copy; 2024 - Dự án học tập MLN111</small>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Custom JS -->
    <script src="script.js"></script>
    
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });
        
        // Simple quiz initialization
        function startQuiz() {
            console.log('Starting quiz initialization...');
            
            // Check if quiz elements exist
            const questionText = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            
            if (!questionText || !optionsContainer) {
                console.error('Quiz elements not found');
                return;
            }
            
            // Initialize quiz state
            window.quizState = {
                currentQuestion: 0,
                answers: {},
                score: 0,
                startTime: Date.now(),
                timer: null,
                hintsUsed: 0
            };
            
            // Quiz questions (simplified version)
            const questions = [
                {
                    question: "Câu nói nổi tiếng nào của Hồ Chí Minh thể hiện tư tưởng yêu nước?",
                    options: [
                        "A. Dân là gốc",
                        "B. Không có gì quý hơn độc lập tự do", 
                        "C. Cần, kiệm, liêm, chính",
                        "D. Học, học nữa, học mãi"
                    ],
                    correct: 1,
                    explanation: "Câu nói 'Không có gì quý hơn độc lập tự do' thể hiện rõ nhất tư tưởng yêu nước của Hồ Chí Minh."
                },
                {
                    question: "Tư tưởng dân chủ của Hồ Chí Minh được thể hiện qua câu nói nào?",
                    options: [
                        "A. Dân là gốc",
                        "B. Đảng là đại diện của nhân dân",
                        "C. Vì dân, vì nước",
                        "D. Tất cả đều đúng"
                    ],
                    correct: 3,
                    explanation: "Tất cả các câu nói này đều thể hiện tư tưởng dân chủ của Hồ Chí Minh."
                },
                {
                    question: "Hồ Chí Minh sinh năm nào và tên thật là gì?",
                    options: [
                        "A. 1889 - Nguyễn Tất Thành",
                        "B. 1890 - Nguyễn Sinh Cung", 
                        "C. 1891 - Nguyễn Ái Quốc",
                        "D. 1892 - Hồ Chí Minh"
                    ],
                    correct: 1,
                    explanation: "Hồ Chí Minh sinh ngày 19/5/1890 với tên thật là Nguyễn Sinh Cung."
                }
            ];
            
            window.quizQuestions = questions;
            
            // Display first question
            displayCurrentQuestion();
            startQuizTimer();
        }
        
        function displayCurrentQuestion() {
            const state = window.quizState;
            const questions = window.quizQuestions;
            const currentQ = questions[state.currentQuestion];
            
            // Update question text
            document.getElementById('questionNumber').textContent = state.currentQuestion + 1;
            document.getElementById('questionText').textContent = currentQ.question;
            
            // Create options
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            currentQ.options.forEach((option, index) => {
                const div = document.createElement('div');
                div.className = 'form-check option-item mb-3';
                div.innerHTML = `
                    <input class="form-check-input" type="radio" name="q${state.currentQuestion}" value="${index}" id="opt${index}">
                    <label class="form-check-label" for="opt${index}">${option}</label>
                `;
                container.appendChild(div);
                
                // Add click handler
                const radio = div.querySelector('input');
                radio.addEventListener('change', function() {
                    if (this.checked) {
                        state.answers[state.currentQuestion] = parseInt(this.value);
                        document.getElementById('nextBtn').disabled = false;
                        
                        // Show explanation
                        const explanationDiv = document.getElementById('explanationContainer');
                        const explanationText = document.getElementById('explanationText');
                        explanationText.textContent = currentQ.explanation;
                        explanationDiv.classList.remove('d-none');
                        
                        if (parseInt(this.value) === currentQ.correct) {
                            explanationDiv.className = 'alert alert-success mt-3';
                        } else {
                            explanationDiv.className = 'alert alert-warning mt-3';
                        }
                    }
                });
            });
            
            // Update navigation
            document.getElementById('prevBtn').disabled = state.currentQuestion === 0;
            document.getElementById('nextBtn').disabled = true;
            
            // Hide containers
            document.getElementById('hintContainer').classList.add('d-none');
            document.getElementById('explanationContainer').classList.add('d-none');
        }
        
        function startQuizTimer() {
            window.quizState.timer = setInterval(function() {
                const elapsed = Math.floor((Date.now() - window.quizState.startTime) / 1000);
                const minutes = Math.floor(elapsed / 60);
                const seconds = elapsed % 60;
                document.getElementById('timeSpent').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // Initialize when DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(startQuiz, 500);
        });
    </script>
</body>
</html>